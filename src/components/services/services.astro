---
const { title, items = [] } = Astro.props
---

<section id="services">
  <header class="bs-container flex items-center justify-between">
    {title && <h2 class="bs-h2">{title}</h2>}
    <nav class="bs-st-button-wrapper flex justify-center gap-4">
      <button aria-label="Previous slide" class="js-fc-btn-prev group bs-btn rounded-full !p-0 flex items-center justify-center h-10 w-10 md:h-12 md:w-12">
        <svg class="opacity-60 h-4 w-4 -translate-x-[2px] group-active:translate-y-[1px]" width="16" height="25" viewBox="0 0 16 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.4483 0.871166C14.6476 1.07002 14.8057 1.30621 14.9135 1.56624C15.0214 1.82626 15.0769 2.105 15.0769 2.38651C15.0769 2.66802 15.0214 2.94676 14.9135 3.20678C14.8057 3.4668 14.6476 3.703 14.4483 3.90185L6.10855 12.2416L14.4483 20.5814C14.6473 20.7804 14.8052 21.0166 14.9129 21.2766C15.0206 21.5366 15.076 21.8153 15.076 22.0967C15.076 22.3782 15.0206 22.6568 14.9129 22.9168C14.8052 23.1768 14.6473 23.4131 14.4483 23.6121C14.2493 23.8111 14.0131 23.9689 13.7531 24.0766C13.4931 24.1843 13.2144 24.2397 12.933 24.2397C12.6515 24.2397 12.3729 24.1843 12.1129 24.0766C11.8529 23.9689 11.6166 23.8111 11.4176 23.6121L1.55177 13.7462C1.35251 13.5474 1.19443 13.3112 1.08657 13.0511C0.978706 12.7911 0.923186 12.5124 0.923186 12.2309C0.923186 11.9494 0.978706 11.6706 1.08657 11.4106C1.19443 11.1506 1.35251 10.9144 1.55177 10.7155L11.4176 0.849671C12.2344 0.03289 13.61 0.0328905 14.4483 0.871166Z" fill="currentColor"></path></svg>
      </button>
      <button aria-label="Next slide" class="js-fc-btn-next group bs-btn rounded-full !p-0 flex items-center justify-center h-10 w-10 md:h-12 md:w-12 -scale-x-100">
        <svg class="opacity-60 h-4 w-4 -translate-x-[2px] group-active:translate-y-[1px]" width="16" height="25" viewBox="0 0 16 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.4483 0.871166C14.6476 1.07002 14.8057 1.30621 14.9135 1.56624C15.0214 1.82626 15.0769 2.105 15.0769 2.38651C15.0769 2.66802 15.0214 2.94676 14.9135 3.20678C14.8057 3.4668 14.6476 3.703 14.4483 3.90185L6.10855 12.2416L14.4483 20.5814C14.6473 20.7804 14.8052 21.0166 14.9129 21.2766C15.0206 21.5366 15.076 21.8153 15.076 22.0967C15.076 22.3782 15.0206 22.6568 14.9129 22.9168C14.8052 23.1768 14.6473 23.4131 14.4483 23.6121C14.2493 23.8111 14.0131 23.9689 13.7531 24.0766C13.4931 24.1843 13.2144 24.2397 12.933 24.2397C12.6515 24.2397 12.3729 24.1843 12.1129 24.0766C11.8529 23.9689 11.6166 23.8111 11.4176 23.6121L1.55177 13.7462C1.35251 13.5474 1.19443 13.3112 1.08657 13.0511C0.978706 12.7911 0.923186 12.5124 0.923186 12.2309C0.923186 11.9494 0.978706 11.6706 1.08657 11.4106C1.19443 11.1506 1.35251 10.9144 1.55177 10.7155L11.4176 0.849671C12.2344 0.03289 13.61 0.0328905 14.4483 0.871166Z" fill="currentColor"></path></svg>
      </button>
    </nav>
  </header>

  <div class="js-fc-swiper swiper select-none bs-mt-md">
    <div class="swiper-wrapper">
      {items?.length > 0 && items.map(item => (
        <div class="swiper-slide bg-bs-surface-0 border border-bs-surface-3 rounded-xl overflow-hidden !h-auto">
          <figure class="flex flex-col gap-6 isolate min-h-[50svh] md:min-h-[40rem] h-full">
            <img src={item.image} alt={item.image_alt} loading="lazy" class="opacity-20 md:opacity-80 rounded-xl grayscale overflow-hidden w-full h-full object-cover object-left absolute inset-0" height="1024" width="768" />
            <div class="hidden md:block absolute rounded-xl overflow-hidden w-full h-full object-cover object-left inset-0 bg-gradient-to-r from-bs-surface-0/90 via-bs-surface-0/60"></div>
            <figcaption class="z-10 p-6 sm:p-10 md:p-20 max-w-xl flex flex-col gap-6 h-full">
              <h2 class="bs-h2" set:html={item.title} />
              <div class="bs-body-text text-pretty flex-1" set:html={item.content} />
              <button type="button" class="bs-btn inline-block self-start bs-mt-sm" onclick="demo.showModal()">
                {item.cta}
              </button>
            </figcaption>
          </figure>
        </div>
      ))}
    </div>
  </div>
</section>

<script>
import Swiper from "swiper"
import 'swiper/css'
const prev_btn = document.querySelector('.js-fc-btn-prev')
const next_btn = document.querySelector('.js-fc-btn-next')
const swiper = new Swiper('.js-fc-swiper', {
  slidesPerView: 1.05,
  spaceBetween: 8,
  speed: 500,
  loop: true,
  centeredSlides: true,
  breakpoints: {
    '640': { slidesPerView: 1.2, spaceBetween: 32 },
    '1600': { slidesPerView: 1.4, spaceBetween: 64 },
    '1900': { slidesPerView: 1.6, spaceBetween: 64 }
  }
})
prev_btn.addEventListener('click', () => swiper.slidePrev())
next_btn.addEventListener('click', () => swiper.slideNext())
swiper.init?.()
</script>

<style>
@keyframes show-buttons {
  to { opacity: 1; }
}
@supports (animation-timeline: view()) {
  .bs-st-button-wrapper {
    opacity: 0;
    animation: show-buttons linear forwards;
    animation-timeline: view(20% block);
  }
}
</style>
